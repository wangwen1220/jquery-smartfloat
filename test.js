(function($){$.fn.smartFloat=function(config){return this.each(function(){var $this=$(this),offset_top=$this.offset().top,offset_left=$this.offset().left,default_position=$this.css("position"),default_top=$this.css("top"),default_left=$this.css("left"),default_zindex=$this.css("z-index"),default_margin=$this.css("margin"),default_width=$this.css("width");config=$.extend({top:10,left:offset_left,zindex:999,margin:0,width:default_width,placeholder:false},config||{});var top=config.top,left=config.left,zindex=config.zindex,margin=config.margin,width=config.width,placeholder=config.placeholder;if(placeholder){var $placeholder=$('<div class="smart-float-placeholder" />').insertAfter($this);$placeholder.width($this.outerWidth(true)).height($this.outerHeight(true)).hide()}$(window).scroll(function(){var scroll_top=$(this).scrollTop();if(scroll_top+top>offset_top){placeholder&&$placeholder.show();$this.addClass("smart-float");if(window.XMLHttpRequest){$this.css({position:"fixed",top:top,left:left,"z-index":zindex,margin:margin,width:width})}else{$this.css({position:"absolute",top:scroll_top+top,left:default_left,"z-index":zindex,margin:margin,width:width})}}else{placeholder&&$placeholder.hide();$this.removeClass("smart-float").css({position:default_position,top:default_top,left:default_left,"z-index":default_zindex,margin:default_margin,width:default_width})}})})}})(jQuery);